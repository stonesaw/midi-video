(function(t){function e(e){for(var a,s,o=e[0],l=e[1],u=e[2],d=0,f=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&f.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);c&&c(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var l=n[o];0!==i[l]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},r=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1f44":function(t,e,n){"use strict";n("2d49")},"26d6":function(t,e,n){},"2d49":function(t,e,n){},"386a":function(t,e,n){"use strict";n("26d6")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=n("2f62");a["a"].use(i["a"]);var r=new i["a"].Store({state:{count:0},mutations:{increment:function(t){t.count++}}}),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("AppFileDropArea",{staticClass:"file-upload-card",attrs:{drag:t.drag},on:{"update:drag":function(e){t.drag=e},drop:function(e){t.file=e}}},[n("AppNavbar",{on:{"files-upload":t.filesUpload}}),n("AppCanvas",{attrs:{"files-data":t.files}}),t._l(t.files,(function(e,a){return n("div",{key:e},[t._v(" ファイル"+t._s(a)+": "+t._s(e)+" ")])}))],2)],1)},o=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar is-light",attrs:{role:"navigation","aria-label":"main navigation"}},[t._m(0),n("div",{staticClass:"navbar-menu",attrs:{id:"navbarBasicExample"}},[n("div",{staticClass:"navbar-start"},[n("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[n("a",{staticClass:"navbar-link"},[t._v(" ファイル ")]),n("div",{staticClass:"navbar-dropdown"},[n("a",{staticClass:"navbar-item"},[n("label",{staticClass:"file-label"},[t._v(" インポート "),n("input",{ref:"file_input",attrs:{type:"file"},on:{change:t.uploadFile}})])])])]),t._m(1),n("a",{staticClass:"navbar-item"},[t._v(" 表示 ")])]),t._m(2)])])},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-brand"},[n("a",{staticClass:"navbar-item",attrs:{href:"./"}},[t._v(" 終了 ")]),n("a",{staticClass:"navbar-burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"}},[n("span",{attrs:{"aria-hidden":"true"}}),n("span",{attrs:{"aria-hidden":"true"}}),n("span",{attrs:{"aria-hidden":"true"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[n("a",{staticClass:"navbar-link"},[t._v(" 編集 ")]),n("div",{staticClass:"navbar-dropdown"},[n("a",{staticClass:"navbar-item"},[t._v(" 元に戻す ")]),n("a",{staticClass:"navbar-item"},[t._v(" やり直す ")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-end"},[n("div",{staticClass:"navbar-item"},[n("div",{staticClass:"buttons"},[n("a",{staticClass:"button is-primary"},[n("strong",[t._v("Sign up")])]),n("a",{staticClass:"button is-light"},[t._v(" Log in ")])])])])}],c={data:function(){return{filesPath:null}},methods:{isActive:function(t){t.currentTarget.classList.toggle("is-active")},uploadFile:function(){var t=this.$refs.file_input.files;t.length>0&&(this.filesPath=t[0],console.log(this.filesPath),this.$emit("files-upload",this.filesPath))}}},d=c,f=(n("386a"),n("2877")),p=Object(f["a"])(d,l,u,!1,null,null,null),v=p.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"appCanvas"}},[n("div",{attrs:{id:"p5Canvas"}}),n("div",[t._v(" "+t._s(t.message)+" sec ( p5's clock ) ")])])},b=[],g=n("7241"),_={props:{filesData:{}},data:function(){return{message:"",files:null}},mounted:function(){var t=n("3425");new t(g.main),g.setDelegate(this.callbackOnP5),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},watch:{filesData:function(t){this.files=t,g.setDebugLog("[open]"+this.files),g.loadMidiData(this.files)}},methods:{callbackOnP5:function(t){this.message=t},handleResize:function(){var t=window.innerWidth,e=window.innerHeight;g.updateCanvasSize(t,e)}}},m=_,w=(n("1f44"),Object(f["a"])(m,h,b,!1,null,null,null)),C=w.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"dropArea"},on:{dragenter:function(e){e.preventDefault(),t.drag=!0},dragleave:function(e){e.preventDefault(),t.drag=!1},drop:function(e){return e.preventDefault(),t.onDrop.apply(null,arguments)}}},[t._t("default"),t.drag?n("div",[t._v(" ドラッグ中 ")]):n("div",[t._v(" ドラッグアンドドロップでファイルを追加 ")])],2)},O=[],k={data:function(){return{drag:!1}},watch:{drag:function(){this.$emit("update:drag",this.drag)}},methods:{onDrop:function(t){this.drag=!1,console.log("on drop"),t&&t.dataTransfer&&0!==t.dataTransfer.files.length&&this.$emit("drop",t.dataTransfer.files[0])}}},x=k,j=(n("f456"),Object(f["a"])(x,y,O,!1,null,"69a2448f",null)),D=j.exports,S={name:"App",components:{AppNavbar:v,AppCanvas:C,AppFileDropArea:D},data:function(){return{drag:!1,files:null}},methods:{filesUpload:function(t){this.files=t}}},A=S,P=(n("5c0b"),Object(f["a"])(A,s,o,!1,null,null,null)),E=P.exports;a["a"].config.productionTip=!1,new a["a"]({store:r,render:function(t){return t(E)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},7241:function(t,e,n){"use strict";n.r(e),n.d(e,"main",(function(){return p})),n.d(e,"setDelegate",(function(){return v})),n.d(e,"updateCanvasSize",(function(){return h})),n.d(e,"setDebugLog",(function(){return b})),n.d(e,"loadMidiData",(function(){return g})),n.d(e,"generateNoteGroup",(function(){return _}));n("cb29"),n("e9c4"),n("b0c0");var a,i,r,s=n("ef75"),o=n("d4ec"),l=n("bee2"),u=(n("d3b7"),n("159b"),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{numer:4,denom:4},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];Object(o["a"])(this,t),a=e,this._bpm=n,this._bar={numer:i[0],denom:i[1]},this._midi_data_list=r,this._objects=[],this._start_t=a.millis(),this._current_t=this._start_t-a.millis(),this._bar_count=0}return Object(l["a"])(t,[{key:"bpm",get:function(){return this._bpm},set:function(t){this._bpm=t}},{key:"current_t",get:function(){return this._current_t}},{key:"bar_count",get:function(){return this._bar_count}},{key:"init",value:function(){this._start_t=a.millis()}},{key:"update",value:function(){this._current_t=a.millis()-this._start_t,this._bar_count=a.floor(this.current_t/1e3/(60/this.bpm))}},{key:"draw",value:function(){this._objects.forEach((function(t){t.draw()}))}}]),t}()),c=null,d=void 0,f="";function p(t){i=t,i.setup=function(){h(document.body.clientWidth,document.body.clientHeight),c.parent("p5Canvas"),i.textSize(24),r=new u(i)},i.draw=function(){r.update(),i.background(255),i.strokeWeight(40),i.noFill();var t=i.drawingContext.createLinearGradient(.1*i.width,.1*i.height,.9*i.width,.9*i.height);t.addColorStop(0,i.color(255,0,255)),t.addColorStop(.5,i.color(255,255,0)),i.drawingContext.strokeStyle=t,i.rect(0,0,i.width,i.height),i.fill(0,209,178),i.text(r.bar_count,100,100),""!==f&&(i.fill(0,209,178),i.text(f,100,100)),void 0!==d&&d(i.round(r.current_t/10)/100)}}function v(t){d=t}function h(t,e){var n=i.round(.8*t),a=9*n/16;null===c&&(c=i.createCanvas(n,a)),i.resizeCanvas(n,a)}function b(t){console.log("set debug log '".concat(t,"'")),f=t}function g(t){console.log("file >>"),console.log(t);var e=new FileReader;e.onload=function(e){var n=new s["Midi"](e.target.result);console.log("midi >>"),console.log(n);var a=JSON.stringify(n,void 0,2);_(t.name,a)},e.readAsArrayBuffer(t),f="file: ".concat(t.name)}function _(t,e){}},9993:function(t,e,n){},"9c0c":function(t,e,n){},f456:function(t,e,n){"use strict";n("9993")}});
//# sourceMappingURL=app.a298eed2.js.map